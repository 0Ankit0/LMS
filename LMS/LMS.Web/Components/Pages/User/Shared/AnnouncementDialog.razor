@using MudBlazor

@code {
    [CascadingParameter] IMudDialogInstance? MudDialog { get; set; }
    [Parameter] public AnnouncementModel Announcement { get; set; } = default!;

    private void Submit() { if (MudDialog != null) MudDialog.Close(DialogResult.Ok(true)); }

    private void Cancel() { if (MudDialog != null) MudDialog.Cancel(); }

    private MudBlazor.Color GetPriorityBadgeColor(string? priority)
    {
        return (priority ?? "").ToLower() switch
        {
            "high" => MudBlazor.Color.Error,
            "medium" => MudBlazor.Color.Warning,
            "low" => MudBlazor.Color.Info,
            _ => MudBlazor.Color.Secondary
        };
    }

    private string GetPriorityIcon(string priority)
    {
        return priority.ToLower() switch
        {
            "high" => Icons.Material.Filled.Warning,
            "medium" => Icons.Material.Filled.Info,
            "low" => Icons.Material.Filled.Notifications,
            _ => Icons.Material.Filled.Info
        };
    }
}

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6" Class="font-bold text-indigo-700 dark:text-indigo-300">@Announcement?.Title</MudText>
    </TitleContent>
    <DialogContent>
        @if (Announcement != null)
        {
            <div class="flex flex-col gap-3 mb-4">
                <div class="flex items-center gap-2 text-gray-500 dark:text-gray-300">
                    <MudIcon Icon="@Icons.Material.Filled.Person" Color="Color.Primary" />
                    <span>@Announcement.AuthorName</span>
                </div>
                <div class="flex items-center gap-2 text-gray-500 dark:text-gray-300">
                    <MudIcon Icon="@Icons.Material.Filled.CalendarToday" Color="Color.Primary" />
                    <span>@Announcement.PublishedAt.ToString("MMM dd, yyyy HH:mm")</span>
                </div>
                <MudChip T="string" Color="@GetPriorityBadgeColor(Announcement.Priority)" Class="w-fit">
                    <MudIcon Icon="@GetPriorityIcon(Announcement.Priority)" Class="mr-1" />
                    @Announcement.Priority Priority
                </MudChip>
            </div>
            <div class="prose dark:prose-invert max-w-none announcement-detail-content">
                @((MarkupString)Announcement.Content)
            </div>
        }
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Secondary" OnClick="Cancel">Close</MudButton>
    </DialogActions>
</MudDialog>



