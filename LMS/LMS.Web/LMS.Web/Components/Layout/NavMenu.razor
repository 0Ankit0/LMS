@using System.Collections.Generic
@rendermode InteractiveAuto

<MudAppBar Elevation="0">
    <MudIconButton Icon="@(isNavbarCollapsed ? Icons.Material.Filled.ChevronRight : Icons.Material.Filled.ChevronLeft)" Color="Color.Inherit" Edge="Edge.Start" OnClick="ToggleNavbar" Title="@(isNavbarCollapsed ? "Expand sidebar" : "Collapse sidebar")" />
    <MudSpacer />
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.End" OnClick="ToggleMobileMenu" Title="Toggle navigation menu" />
</MudAppBar>

<MudNavMenu Class="@($"nav-scrollable {GetNavScrollableClasses()}")" Style="@(isMobileMenuOpen ? "display: block;" : "")">
    <MudNavLink Href="/home" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
    <MudNavLink Href="/user/lms/analytics" Icon="@Icons.Material.Filled.Analytics">Analytics Dashboard</MudNavLink>
    <MudNavLink Href="user/lms/courses/catalog" Icon="@Icons.Material.Filled.Book">Course Catalog</MudNavLink>
    <MudNavLink Href="user/lms/announcement-list" Icon="@Icons.Material.Filled.Campaign">Announcements</MudNavLink>
    <MudNavLink Href="user/lms/forums" Icon="@Icons.Material.Filled.Forum">Forums</MudNavLink>
</MudNavMenu>

@code {
    private bool isNavbarCollapsed = true; // Start contracted by default
    private bool isMobileMenuOpen = false; // Mobile menu state

    private void ToggleNavbar()
    {
        isNavbarCollapsed = !isNavbarCollapsed;
    }

    private void ToggleMobileMenu()
    {
        isMobileMenuOpen = !isMobileMenuOpen;
    }

    private string GetNavScrollableClasses()
    {
        var classes = new List<string>();

        if (isNavbarCollapsed)
        {
            classes.Add("collapsed");
        }

        return string.Join(" ", classes);
    }
}